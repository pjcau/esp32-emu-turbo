(kicad_sch
  (version 20231120)
  (generator "eeschema")
  (generator_version "9.0")
  (uuid "0000001a-cafe-4000-8000-00000000001a")
  (paper "A4")
  (title_block
    (title "Audio - I2S -> PAM8403 -> Speaker")
    (comment 1 "ESP32 Emu Turbo - Handheld Retro Console")
    (comment 2 "Generated by scripts/generate_schematics")
  )

  (lib_symbols
    (symbol "PAM8403_Module" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "PAM8403" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "PAM8403_Module_0_1" (rectangle (start -7.62 6.35) (end 7.62 -6.35) (stroke (width 0.254) (type default)) (fill (type background))))
      (symbol "PAM8403_Module_1_1"
        (pin power_in line (at -10.16 3.81 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -10.16 0 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 -3.81 0) (length 2.54) (name "AUDIO_IN" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin output line (at 10.16 3.81 180) (length 2.54) (name "SPK+" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin output line (at 10.16 0 180) (length 2.54) (name "SPK-" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))))
    (symbol "Speaker" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
      (property "Reference" "LS" (at 2.54 2.54 0) (effects (font (size 1.27 1.27))))
      (property "Value" "Speaker" (at 0 -5.08 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "Speaker_0_1"
        (rectangle (start -1.27 1.27) (end 0 -1.27) (stroke (width 0.254) (type default)) (fill (type none)))
        (polyline (pts (xy 0 1.27) (xy 2.54 3.81) (xy 2.54 -3.81) (xy 0 -1.27)) (stroke (width 0.254) (type default)) (fill (type none))))
      (symbol "Speaker_1_1"
        (pin passive line (at -3.81 0.635 0) (length 2.54) (name "+" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at -3.81 -0.635 0) (length 2.54) (name "-" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))))
    (symbol "+3V3" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+3V3" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+3V3_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "+3V3_1_1" (pin power_in line (at 0 0 90) (length 0) (name "+3V3" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
    (symbol "+5V" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+5V" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+5V_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "+5V_1_1" (pin power_in line (at 0 0 90) (length 0) (name "+5V" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
    (symbol "GND" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -5.08 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "GND" (at 0 -3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "GND_0_1" (polyline (pts (xy 0 0) (xy 0 -1.27) (xy 1.27 -1.27) (xy 0 -2.54) (xy -1.27 -1.27) (xy 0 -1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "GND_1_1" (pin power_in line (at 0 0 270) (length 0) (name "GND" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
  )

  (text "AUDIO OUTPUT" (at 30 25 0) (effects (font (size 5 5) bold) (justify left)))
  (text "I2S DAC -> PAM8403 Class-D Amplifier -> 28mm 8ohm Speaker" (at 30 33 0) (effects (font (size 2.54 2.54)) (justify left)))
  (symbol (lib_id "PAM8403_Module") (at 120 110 0) (unit 1) (exclude_from_sim no) (in_bom yes) (on_board yes) (dnp no) (uuid "00000001-cafe-4000-8000-000000000001") (property "Reference" "U5" (at 120 105 0) (effects (font (size 1.27 1.27)))) (property "Value" "PAM8403" (at 120 115 0) (effects (font (size 1.27 1.27)))) (pin "1" (uuid "00000002-cafe-4000-8000-000000000002")) (pin "2" (uuid "00000003-cafe-4000-8000-000000000003")) (pin "3" (uuid "00000004-cafe-4000-8000-000000000004")) (pin "4" (uuid "00000005-cafe-4000-8000-000000000005")) (pin "5" (uuid "00000006-cafe-4000-8000-000000000006")))
  (global_label "+5V" (shape input) (at 90 106.19 0) (effects (font (size 1.27 1.27))) (uuid "00000007-cafe-4000-8000-000000000007") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (wire (pts (xy 90 106.19) (xy 109.84 106.19)) (stroke (width 0) (type default)) (uuid "00000008-cafe-4000-8000-000000000008"))
  (symbol (lib_id "GND") (at 90 118 0) (unit 1) (exclude_from_sim no) (in_bom no) (on_board no) (dnp no) (uuid "00000009-cafe-4000-8000-000000000009") (property "Reference" "#PWR001" (at 90 116 0) (effects (font (size 1.27 1.27)) hide)) (property "Value" "GND" (at 90 120 0) (effects (font (size 1.27 1.27)) hide)) (pin "1" (uuid "0000000a-cafe-4000-8000-00000000000a")))
  (wire (pts (xy 109.84 110) (xy 90 110)) (stroke (width 0) (type default)) (uuid "0000000b-cafe-4000-8000-00000000000b"))
  (wire (pts (xy 90 110) (xy 90 118)) (stroke (width 0) (type default)) (uuid "0000000c-cafe-4000-8000-00000000000c"))
  (global_label "I2S_DOUT" (shape input) (at 90 113.81 0) (effects (font (size 1.27 1.27))) (uuid "0000000d-cafe-4000-8000-00000000000d") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (wire (pts (xy 90 113.81) (xy 109.84 113.81)) (stroke (width 0) (type default)) (uuid "0000000e-cafe-4000-8000-00000000000e"))
  (text "I2S Bus (directly from ESP32-S3):" (at 30 55 0) (effects (font (size 2.54 2.54) bold) (justify left)))
  (global_label "I2S_BCLK" (shape input) (at 30 68 0) (effects (font (size 1.27 1.27))) (uuid "0000000f-cafe-4000-8000-00000000000f") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO15 - Bit Clock (1.411 MHz @ 44.1kHz)" (at 65 68 0) (effects (font (size 2.54 2.54)) (justify left)))
  (global_label "I2S_LRCK" (shape input) (at 30 78 0) (effects (font (size 1.27 1.27))) (uuid "00000010-cafe-4000-8000-000000000010") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO16 - L/R Word Select (44.1kHz)" (at 65 78 0) (effects (font (size 2.54 2.54)) (justify left)))
  (global_label "I2S_DOUT" (shape output) (at 30 88 0) (effects (font (size 1.27 1.27))) (uuid "00000011-cafe-4000-8000-000000000011") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO17 - Serial Data Out -> PAM8403" (at 65 88 0) (effects (font (size 2.54 2.54)) (justify left)))
  (symbol (lib_id "Speaker") (at 185 110 0) (unit 1) (exclude_from_sim no) (in_bom yes) (on_board yes) (dnp no) (uuid "00000012-cafe-4000-8000-000000000012") (property "Reference" "SPK1" (at 185 105 0) (effects (font (size 1.27 1.27)))) (property "Value" "28mm 8ohm" (at 185 115 0) (effects (font (size 1.27 1.27)))) (pin "1" (uuid "00000013-cafe-4000-8000-000000000013")) (pin "2" (uuid "00000014-cafe-4000-8000-000000000014")))
  (text "28mm speaker" (at 193 105 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "8 ohm / 0.5W" (at 193 111 0) (effects (font (size 2.54 2.54)) (justify left)))
  (wire (pts (xy 130.16 106.19) (xy 181.19 106.19)) (stroke (width 0) (type default)) (uuid "00000015-cafe-4000-8000-000000000015"))
  (wire (pts (xy 181.19 106.19) (xy 181.19 109.365)) (stroke (width 0) (type default)) (uuid "00000016-cafe-4000-8000-000000000016"))
  (wire (pts (xy 130.16 110) (xy 175 110)) (stroke (width 0) (type default)) (uuid "00000017-cafe-4000-8000-000000000017"))
  (wire (pts (xy 175 110) (xy 175 110.635)) (stroke (width 0) (type default)) (uuid "00000018-cafe-4000-8000-000000000018"))
  (wire (pts (xy 175 110.635) (xy 181.19 110.635)) (stroke (width 0) (type default)) (uuid "00000019-cafe-4000-8000-000000000019"))
  (text "Design Notes:" (at 30 165 0) (effects (font (size 2.54 2.54) bold) (justify left)))
  (text "- PAM8403: filterless Class-D stereo amplifier (3W per channel max)" (at 30 173 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- Only one channel used for mono audio" (at 30 179 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- No external DAC needed: ESP32-S3 has built-in I2S with DMA" (at 30 185 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- Powered from +5V rail for max headroom (3.3V limits volume)" (at 30 191 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- DMA-driven audio streaming for low CPU overhead" (at 30 197 0) (effects (font (size 2.54 2.54)) (justify left)))

  (sheet_instances (path "/" (page "4")))
)
