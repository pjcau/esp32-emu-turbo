(kicad_sch
  (version 20231120)
  (generator "eeschema")
  (generator_version "9.0")
  (uuid "e63e39d7-6ac0-4ffd-8aa3-1841a4541b55")
  (paper "A2")

  (lib_symbols
    ;; ===== ESP32-S3-WROOM-1 Module (38-pin) =====
    (symbol "ESP32-S3-WROOM-1"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 40.64 0) (effects (font (size 1.27 1.27))))
      (property "Value" "ESP32-S3-WROOM-1-N16R8" (at 0 -40.64 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "https://www.espressif.com/sites/default/files/documentation/esp32-s3-wroom-1_wroom-1u_datasheet_en.pdf" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "ESP32-S3-WROOM-1_0_1"
        (rectangle (start -12.7 39.37) (end 12.7 -39.37)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "ESP32-S3-WROOM-1_1_1"
        ;; Left side pins (top to bottom)
        (pin power_in line (at -15.24 38.1 0) (length 2.54) (name "3V3" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -15.24 35.56 0) (length 2.54) (name "3V3" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin input line (at -15.24 33.02 0) (length 2.54) (name "EN" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 30.48 0) (length 2.54) (name "GPIO4" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 27.94 0) (length 2.54) (name "GPIO5" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 25.4 0) (length 2.54) (name "GPIO6" (effects (font (size 1.016 1.016)))) (number "6" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 22.86 0) (length 2.54) (name "GPIO7" (effects (font (size 1.016 1.016)))) (number "7" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 20.32 0) (length 2.54) (name "GPIO15" (effects (font (size 1.016 1.016)))) (number "8" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 17.78 0) (length 2.54) (name "GPIO16" (effects (font (size 1.016 1.016)))) (number "9" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 15.24 0) (length 2.54) (name "GPIO17" (effects (font (size 1.016 1.016)))) (number "10" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 12.7 0) (length 2.54) (name "GPIO18" (effects (font (size 1.016 1.016)))) (number "11" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 10.16 0) (length 2.54) (name "GPIO8" (effects (font (size 1.016 1.016)))) (number "12" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 5.08 0) (length 2.54) (name "GPIO19" (effects (font (size 1.016 1.016)))) (number "13" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 2.54 0) (length 2.54) (name "GPIO20" (effects (font (size 1.016 1.016)))) (number "14" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 0 0) (length 2.54) (name "GPIO3" (effects (font (size 1.016 1.016)))) (number "15" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 -5.08 0) (length 2.54) (name "GPIO46" (effects (font (size 1.016 1.016)))) (number "16" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 -7.62 0) (length 2.54) (name "GPIO9" (effects (font (size 1.016 1.016)))) (number "17" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 -10.16 0) (length 2.54) (name "GPIO10" (effects (font (size 1.016 1.016)))) (number "18" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -15.24 -12.7 0) (length 2.54) (name "GPIO11" (effects (font (size 1.016 1.016)))) (number "19" (effects (font (size 1.016 1.016)))))
        ;; Right side pins (top to bottom)
        (pin bidirectional line (at 15.24 38.1 180) (length 2.54) (name "GPIO12" (effects (font (size 1.016 1.016)))) (number "20" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 35.56 180) (length 2.54) (name "GPIO13" (effects (font (size 1.016 1.016)))) (number "21" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 33.02 180) (length 2.54) (name "GPIO14" (effects (font (size 1.016 1.016)))) (number "22" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 30.48 180) (length 2.54) (name "GPIO21" (effects (font (size 1.016 1.016)))) (number "23" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 27.94 180) (length 2.54) (name "GPIO47" (effects (font (size 1.016 1.016)))) (number "24" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 25.4 180) (length 2.54) (name "GPIO48" (effects (font (size 1.016 1.016)))) (number "25" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 22.86 180) (length 2.54) (name "GPIO45" (effects (font (size 1.016 1.016)))) (number "26" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 20.32 180) (length 2.54) (name "GPIO0" (effects (font (size 1.016 1.016)))) (number "27" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 17.78 180) (length 2.54) (name "GPIO35" (effects (font (size 1.016 1.016)))) (number "28" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 15.24 180) (length 2.54) (name "GPIO36" (effects (font (size 1.016 1.016)))) (number "29" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 12.7 180) (length 2.54) (name "GPIO37" (effects (font (size 1.016 1.016)))) (number "30" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 10.16 180) (length 2.54) (name "GPIO38" (effects (font (size 1.016 1.016)))) (number "31" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 7.62 180) (length 2.54) (name "GPIO39" (effects (font (size 1.016 1.016)))) (number "32" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 5.08 180) (length 2.54) (name "GPIO40" (effects (font (size 1.016 1.016)))) (number "33" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 2.54 180) (length 2.54) (name "GPIO41" (effects (font (size 1.016 1.016)))) (number "34" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 0 180) (length 2.54) (name "GPIO42" (effects (font (size 1.016 1.016)))) (number "35" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 -5.08 180) (length 2.54) (name "TX0" (effects (font (size 1.016 1.016)))) (number "36" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 -7.62 180) (length 2.54) (name "RX0" (effects (font (size 1.016 1.016)))) (number "37" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 -10.16 180) (length 2.54) (name "GPIO1" (effects (font (size 1.016 1.016)))) (number "38" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 15.24 -12.7 180) (length 2.54) (name "GPIO2" (effects (font (size 1.016 1.016)))) (number "39" (effects (font (size 1.016 1.016)))))
        ;; Bottom pins
        (pin power_in line (at 0 -41.91 90) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "40" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at 2.54 -41.91 90) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "41" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== AMS1117-3.3V Voltage Regulator =====
    (symbol "AMS1117-3.3"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 5.08 0) (effects (font (size 1.27 1.27))))
      (property "Value" "AMS1117-3.3" (at 0 -5.08 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "Package_TO_SOT_SMD:SOT-223-3_TabPin2" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "AMS1117-3.3_0_1"
        (rectangle (start -5.08 3.81) (end 5.08 -3.81)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "AMS1117-3.3_1_1"
        (pin power_in line (at -7.62 2.54 0) (length 2.54) (name "VIN" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at 0 -6.35 90) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin power_out line (at 7.62 2.54 180) (length 2.54) (name "VOUT" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== Generic Capacitor =====
    (symbol "C"
      (pin_names (offset 0.254) hide)
      (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.635 2.54 0) (effects (font (size 1.27 1.27)) (justify left)))
      (property "Value" "C" (at 0.635 -2.54 0) (effects (font (size 1.27 1.27)) (justify left)))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "C_0_1"
        (polyline (pts (xy -2.032 -0.762) (xy 2.032 -0.762)) (stroke (width 0.508) (type default)) (fill (type none)))
        (polyline (pts (xy -2.032 0.762) (xy 2.032 0.762)) (stroke (width 0.508) (type default)) (fill (type none)))
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 3.048) (name "~" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 0 -3.81 90) (length 3.048) (name "~" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== Generic Resistor =====
    (symbol "R"
      (pin_names (offset 0) hide)
      (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90) (effects (font (size 1.27 1.27))))
      (property "Value" "R" (at -1.778 0 90) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none)))
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27) (name "~" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 0 -3.81 90) (length 1.27) (name "~" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== Tact Switch =====
    (symbol "SW_Push"
      (pin_names (offset 1.016) hide)
      (in_bom yes) (on_board yes)
      (property "Reference" "SW" (at 1.27 2.54 0) (effects (font (size 1.27 1.27)) (justify left)))
      (property "Value" "SW_Push" (at 0 -1.524 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "SW_Push_0_1"
        (circle (center -2.032 0) (radius 0.508) (stroke (width 0) (type default)) (fill (type none)))
        (circle (center 2.032 0) (radius 0.508) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 1.524) (xy 0 3.048)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy -2.54 0) (xy 2.54 0)) (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "SW_Push_1_1"
        (pin passive line (at -5.08 0 0) (length 2.54) (name "1" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 5.08 0 180) (length 2.54) (name "2" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== IP5306 Power Module =====
    (symbol "IP5306_Module"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "IP5306_USB-C_Module" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "IP5306_Module_0_1"
        (rectangle (start -7.62 6.35) (end 7.62 -6.35)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "IP5306_Module_1_1"
        (pin power_in line (at -10.16 3.81 0) (length 2.54) (name "USB_5V" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -10.16 0 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 3.81 180) (length 2.54) (name "BAT+" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 0 180) (length 2.54) (name "BAT-" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin power_out line (at 10.16 -3.81 180) (length 2.54) (name "OUT_5V" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== PAM8403 Amplifier Module =====
    (symbol "PAM8403_Module"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "PAM8403" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "PAM8403_Module_0_1"
        (rectangle (start -7.62 6.35) (end 7.62 -6.35)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "PAM8403_Module_1_1"
        (pin power_in line (at -10.16 3.81 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -10.16 0 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 -3.81 0) (length 2.54) (name "AUDIO_IN" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin output line (at 10.16 3.81 180) (length 2.54) (name "SPK+" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin output line (at 10.16 0 180) (length 2.54) (name "SPK-" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== SD Card SPI Module =====
    (symbol "SD_Module"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "SD_Card_SPI" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "SD_Module_0_1"
        (rectangle (start -7.62 6.35) (end 7.62 -6.35)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "SD_Module_1_1"
        (pin power_in line (at -10.16 3.81 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -10.16 0 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin input line (at 10.16 3.81 180) (length 2.54) (name "MOSI" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin output line (at 10.16 0 180) (length 2.54) (name "MISO" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin input line (at 10.16 -3.81 180) (length 2.54) (name "CLK" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 -3.81 0) (length 2.54) (name "CS" (effects (font (size 1.016 1.016)))) (number "6" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== ST7796S Display Module (8-bit 8080 parallel) =====
    (symbol "ST7796S_Module"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 17.78 0) (effects (font (size 1.27 1.27))))
      (property "Value" "ST7796S_4.0\"_8080" (at 0 -17.78 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "ST7796S_Module_0_1"
        (rectangle (start -7.62 16.51) (end 7.62 -16.51)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "ST7796S_Module_1_1"
        (pin power_in line (at -10.16 15.24 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -10.16 12.7 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 10.16 0) (length 2.54) (name "CS" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 7.62 0) (length 2.54) (name "RST" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 5.08 0) (length 2.54) (name "DC/RS" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 2.54 0) (length 2.54) (name "WR" (effects (font (size 1.016 1.016)))) (number "6" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 0 0) (length 2.54) (name "RD" (effects (font (size 1.016 1.016)))) (number "7" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 15.24 180) (length 2.54) (name "D0" (effects (font (size 1.016 1.016)))) (number "8" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 12.7 180) (length 2.54) (name "D1" (effects (font (size 1.016 1.016)))) (number "9" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 10.16 180) (length 2.54) (name "D2" (effects (font (size 1.016 1.016)))) (number "10" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 7.62 180) (length 2.54) (name "D3" (effects (font (size 1.016 1.016)))) (number "11" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 5.08 180) (length 2.54) (name "D4" (effects (font (size 1.016 1.016)))) (number "12" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 2.54 180) (length 2.54) (name "D5" (effects (font (size 1.016 1.016)))) (number "13" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 0 180) (length 2.54) (name "D6" (effects (font (size 1.016 1.016)))) (number "14" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 -2.54 180) (length 2.54) (name "D7" (effects (font (size 1.016 1.016)))) (number "15" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 -5.08 0) (length 2.54) (name "BL" (effects (font (size 1.016 1.016)))) (number "16" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== LiPo Battery =====
    (symbol "Battery"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "BT" (at 2.54 2.54 0) (effects (font (size 1.27 1.27))))
      (property "Value" "LiPo_3.7V_5000mAh" (at 0 -5.08 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "Battery_0_1"
        (polyline (pts (xy -1.27 1.27) (xy 1.27 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
        (polyline (pts (xy -0.635 0.254) (xy 0.635 0.254)) (stroke (width 0.254) (type default)) (fill (type none)))
        (polyline (pts (xy -1.27 -0.508) (xy 1.27 -0.508)) (stroke (width 0.254) (type default)) (fill (type none)))
        (polyline (pts (xy -0.635 -1.524) (xy 0.635 -1.524)) (stroke (width 0.254) (type default)) (fill (type none)))
      )
      (symbol "Battery_1_1"
        (pin passive line (at 0 3.81 270) (length 2.54) (name "+" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at 0 -3.81 90) (length 2.54) (name "-" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== USB Type-C Connector =====
    (symbol "USB_C"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "J" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "USB_C" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "USB_C_0_1"
        (rectangle (start -5.08 6.35) (end 5.08 -6.35)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "USB_C_1_1"
        (pin power_out line (at 7.62 3.81 180) (length 2.54) (name "VBUS" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin passive line (at 7.62 0 180) (length 2.54) (name "CC1" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin passive line (at 7.62 -3.81 180) (length 2.54) (name "CC2" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -7.62 3.81 0) (length 2.54) (name "D+" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at -7.62 0 0) (length 2.54) (name "D-" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at 0 -8.89 90) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "6" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== Speaker =====
    (symbol "Speaker"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "LS" (at 2.54 2.54 0) (effects (font (size 1.27 1.27))))
      (property "Value" "28mm_8ohm_0.5W" (at 0 -5.08 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "Speaker_0_1"
        (rectangle (start -1.27 1.27) (end 0 -1.27)
          (stroke (width 0.254) (type default))
          (fill (type none)))
        (polyline (pts (xy 0 1.27) (xy 2.54 3.81) (xy 2.54 -3.81) (xy 0 -1.27))
          (stroke (width 0.254) (type default)) (fill (type none)))
      )
      (symbol "Speaker_1_1"
        (pin passive line (at -3.81 0.635 0) (length 2.54) (name "+" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
        (pin passive line (at -3.81 -0.635 0) (length 2.54) (name "-" (effects (font (size 1.27 1.27)))) (number "2" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== PSP Joystick Module =====
    (symbol "PSP_Joystick"
      (pin_names (offset 1.016))
      (in_bom yes) (on_board yes)
      (property "Reference" "J" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "PSP_Joystick" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "PSP_Joystick_0_1"
        (rectangle (start -5.08 6.35) (end 5.08 -6.35)
          (stroke (width 0.254) (type default))
          (fill (type background)))
      )
      (symbol "PSP_Joystick_1_1"
        (pin power_in line (at -7.62 3.81 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -7.62 0 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin output line (at 7.62 3.81 180) (length 2.54) (name "X_AXIS" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin output line (at 7.62 0 180) (length 2.54) (name "Y_AXIS" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
      )
    )

    ;; ===== Power flag =====
    (symbol "PWR_FLAG"
      (pin_names (offset 0) hide)
      (in_bom no) (on_board no)
      (property "Reference" "#FLG" (at 0 1.905 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "PWR_FLAG" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "PWR_FLAG_0_0"
        (pin power_out line (at 0 0 90) (length 0) (name "pwr" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== GND Power Symbol =====
    (symbol "GND"
      (pin_names (offset 0) hide)
      (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -5.08 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "GND" (at 0 -3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "GND_0_1"
        (polyline (pts (xy 0 0) (xy 0 -1.27) (xy 1.27 -1.27) (xy 0 -2.54) (xy -1.27 -1.27) (xy 0 -1.27))
          (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) (name "GND" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== +3.3V Power Symbol =====
    (symbol "+3V3"
      (pin_names (offset 0) hide)
      (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+3V3" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+3V3_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "+3V3_1_1"
        (pin power_in line (at 0 0 90) (length 0) (name "+3V3" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
      )
    )

    ;; ===== +5V Power Symbol =====
    (symbol "+5V"
      (pin_names (offset 0) hide)
      (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+5V" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+5V_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none)))
      )
      (symbol "+5V_1_1"
        (pin power_in line (at 0 0 90) (length 0) (name "+5V" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))
      )
    )
  )

  ;; ==========================================
  ;; SCHEMATIC INSTANCES
  ;; ==========================================

  ;; ===== SECTION LABELS (Text annotations) =====

  (text "=== POWER SUPPLY SECTION ===" (at 25.4 12.7 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "USB-C -> IP5306 (charge+boost) -> AMS1117 (5V to 3.3V)" (at 25.4 17.78 0)
    (effects (font (size 2.54 2.54)) (justify left)))

  ;; ===== USB-C Connector J1 =====
  (symbol
    (lib_id "USB_C")
    (at 38.1 45.72 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a1000001-0000-0000-0000-000000000001")
    (property "Reference" "J1" (at 38.1 53.34 0) (effects (font (size 1.27 1.27))))
    (property "Value" "USB_C" (at 38.1 38.1 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b1000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b1000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b1000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b1000001-0004-0000-0000-000000000001"))
    (pin "5" (uuid "b1000001-0005-0000-0000-000000000001"))
    (pin "6" (uuid "b1000001-0006-0000-0000-000000000001"))
  )

  ;; CC1 pull-down resistor (5.1k for UFP detection)
  (symbol
    (lib_id "R")
    (at 53.34 48.26 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a1000002-0000-0000-0000-000000000001")
    (property "Reference" "R1" (at 55.88 48.26 0) (effects (font (size 1.27 1.27))))
    (property "Value" "5.1k" (at 50.8 48.26 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b1000002-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b1000002-0002-0000-0000-000000000001"))
  )

  ;; CC2 pull-down resistor (5.1k for UFP detection)
  (symbol
    (lib_id "R")
    (at 58.42 48.26 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a1000003-0000-0000-0000-000000000001")
    (property "Reference" "R2" (at 60.96 48.26 0) (effects (font (size 1.27 1.27))))
    (property "Value" "5.1k" (at 55.88 48.26 90) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b1000003-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b1000003-0002-0000-0000-000000000001"))
  )

  ;; ===== IP5306 Power Module U2 =====
  (symbol
    (lib_id "IP5306_Module")
    (at 88.9 45.72 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a2000001-0000-0000-0000-000000000001")
    (property "Reference" "U2" (at 88.9 35.56 0) (effects (font (size 1.27 1.27))))
    (property "Value" "IP5306_USB-C_Module" (at 88.9 55.88 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b2000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b2000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b2000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b2000001-0004-0000-0000-000000000001"))
    (pin "5" (uuid "b2000001-0005-0000-0000-000000000001"))
  )

  ;; ===== LiPo Battery BT1 =====
  (symbol
    (lib_id "Battery")
    (at 119.38 45.72 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a2000002-0000-0000-0000-000000000001")
    (property "Reference" "BT1" (at 121.92 43.18 0) (effects (font (size 1.27 1.27))))
    (property "Value" "LiPo_3.7V_5000mAh" (at 119.38 52.07 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b2000002-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b2000002-0002-0000-0000-000000000001"))
  )

  ;; ===== AMS1117-3.3 Voltage Regulator U3 =====
  (symbol
    (lib_id "AMS1117-3.3")
    (at 149.86 41.91 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a3000001-0000-0000-0000-000000000001")
    (property "Reference" "U3" (at 149.86 35.56 0) (effects (font (size 1.27 1.27))))
    (property "Value" "AMS1117-3.3" (at 149.86 48.26 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b3000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b3000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b3000001-0003-0000-0000-000000000001"))
  )

  ;; Input capacitor for AMS1117
  (symbol
    (lib_id "C")
    (at 137.16 48.26 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a3000002-0000-0000-0000-000000000001")
    (property "Reference" "C1" (at 139.7 46.99 0) (effects (font (size 1.27 1.27))))
    (property "Value" "10uF" (at 139.7 50.8 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b3000002-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b3000002-0002-0000-0000-000000000001"))
  )

  ;; Output capacitor for AMS1117
  (symbol
    (lib_id "C")
    (at 165.1 48.26 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a3000003-0000-0000-0000-000000000001")
    (property "Reference" "C2" (at 167.64 46.99 0) (effects (font (size 1.27 1.27))))
    (property "Value" "22uF" (at 167.64 50.8 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b3000003-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b3000003-0002-0000-0000-000000000001"))
  )

  ;; ===== MCU SECTION =====

  (text "=== MCU — ESP32-S3-WROOM-1 N16R8 ===" (at 25.4 76.2 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "Dual-core LX7 240MHz | 16MB Flash | 8MB Octal PSRAM | SIMD/PIE" (at 25.4 81.28 0)
    (effects (font (size 2.54 2.54)) (justify left)))

  ;; ===== ESP32-S3 Module U1 =====
  (symbol
    (lib_id "ESP32-S3-WROOM-1")
    (at 101.6 134.62 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a4000001-0000-0000-0000-000000000001")
    (property "Reference" "U1" (at 101.6 91.44 0) (effects (font (size 1.27 1.27))))
    (property "Value" "ESP32-S3-WROOM-1-N16R8" (at 101.6 177.8 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b4000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b4000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b4000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b4000001-0004-0000-0000-000000000001"))
    (pin "5" (uuid "b4000001-0005-0000-0000-000000000001"))
    (pin "6" (uuid "b4000001-0006-0000-0000-000000000001"))
    (pin "7" (uuid "b4000001-0007-0000-0000-000000000001"))
    (pin "8" (uuid "b4000001-0008-0000-0000-000000000001"))
    (pin "9" (uuid "b4000001-0009-0000-0000-000000000001"))
    (pin "10" (uuid "b4000001-0010-0000-0000-000000000001"))
    (pin "11" (uuid "b4000001-0011-0000-0000-000000000001"))
    (pin "12" (uuid "b4000001-0012-0000-0000-000000000001"))
    (pin "13" (uuid "b4000001-0013-0000-0000-000000000001"))
    (pin "14" (uuid "b4000001-0014-0000-0000-000000000001"))
    (pin "15" (uuid "b4000001-0015-0000-0000-000000000001"))
    (pin "16" (uuid "b4000001-0016-0000-0000-000000000001"))
    (pin "17" (uuid "b4000001-0017-0000-0000-000000000001"))
    (pin "18" (uuid "b4000001-0018-0000-0000-000000000001"))
    (pin "19" (uuid "b4000001-0019-0000-0000-000000000001"))
    (pin "20" (uuid "b4000001-0020-0000-0000-000000000001"))
    (pin "21" (uuid "b4000001-0021-0000-0000-000000000001"))
    (pin "22" (uuid "b4000001-0022-0000-0000-000000000001"))
    (pin "23" (uuid "b4000001-0023-0000-0000-000000000001"))
    (pin "24" (uuid "b4000001-0024-0000-0000-000000000001"))
    (pin "25" (uuid "b4000001-0025-0000-0000-000000000001"))
    (pin "26" (uuid "b4000001-0026-0000-0000-000000000001"))
    (pin "27" (uuid "b4000001-0027-0000-0000-000000000001"))
    (pin "28" (uuid "b4000001-0028-0000-0000-000000000001"))
    (pin "29" (uuid "b4000001-0029-0000-0000-000000000001"))
    (pin "30" (uuid "b4000001-0030-0000-0000-000000000001"))
    (pin "31" (uuid "b4000001-0031-0000-0000-000000000001"))
    (pin "32" (uuid "b4000001-0032-0000-0000-000000000001"))
    (pin "33" (uuid "b4000001-0033-0000-0000-000000000001"))
    (pin "34" (uuid "b4000001-0034-0000-0000-000000000001"))
    (pin "35" (uuid "b4000001-0035-0000-0000-000000000001"))
    (pin "36" (uuid "b4000001-0036-0000-0000-000000000001"))
    (pin "37" (uuid "b4000001-0037-0000-0000-000000000001"))
    (pin "38" (uuid "b4000001-0038-0000-0000-000000000001"))
    (pin "39" (uuid "b4000001-0039-0000-0000-000000000001"))
    (pin "40" (uuid "b4000001-0040-0000-0000-000000000001"))
    (pin "41" (uuid "b4000001-0041-0000-0000-000000000001"))
  )

  ;; EN pull-up resistor + reset capacitor
  (symbol
    (lib_id "R")
    (at 76.2 96.52 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a4000002-0000-0000-0000-000000000001")
    (property "Reference" "R3" (at 78.74 96.52 0) (effects (font (size 1.27 1.27))))
    (property "Value" "10k" (at 73.66 96.52 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b4000002-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b4000002-0002-0000-0000-000000000001"))
  )

  (symbol
    (lib_id "C")
    (at 76.2 106.68 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a4000003-0000-0000-0000-000000000001")
    (property "Reference" "C3" (at 78.74 106.68 0) (effects (font (size 1.27 1.27))))
    (property "Value" "100nF" (at 73.66 106.68 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b4000003-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b4000003-0002-0000-0000-000000000001"))
  )

  ;; Decoupling caps for ESP32-S3 3V3 pins
  (symbol
    (lib_id "C")
    (at 71.12 91.44 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a4000004-0000-0000-0000-000000000001")
    (property "Reference" "C4" (at 73.66 91.44 0) (effects (font (size 1.27 1.27))))
    (property "Value" "100nF" (at 68.58 91.44 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b4000004-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b4000004-0002-0000-0000-000000000001"))
  )

  ;; ===== DISPLAY SECTION =====

  (text "=== DISPLAY — ST7796S 4.0\" 8-bit 8080 Parallel ===" (at 195.58 12.7 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "8 data lines (D0-D7) + WR + RD + DC + CS + RST + Backlight" (at 195.58 17.78 0)
    (effects (font (size 2.54 2.54)) (justify left)))

  ;; ===== ST7796S Display Module U4 =====
  (symbol
    (lib_id "ST7796S_Module")
    (at 231.14 55.88 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a5000001-0000-0000-0000-000000000001")
    (property "Reference" "U4" (at 231.14 35.56 0) (effects (font (size 1.27 1.27))))
    (property "Value" "ST7796S_4.0\"_8080" (at 231.14 76.2 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b5000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b5000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b5000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b5000001-0004-0000-0000-000000000001"))
    (pin "5" (uuid "b5000001-0005-0000-0000-000000000001"))
    (pin "6" (uuid "b5000001-0006-0000-0000-000000000001"))
    (pin "7" (uuid "b5000001-0007-0000-0000-000000000001"))
    (pin "8" (uuid "b5000001-0008-0000-0000-000000000001"))
    (pin "9" (uuid "b5000001-0009-0000-0000-000000000001"))
    (pin "10" (uuid "b5000001-0010-0000-0000-000000000001"))
    (pin "11" (uuid "b5000001-0011-0000-0000-000000000001"))
    (pin "12" (uuid "b5000001-0012-0000-0000-000000000001"))
    (pin "13" (uuid "b5000001-0013-0000-0000-000000000001"))
    (pin "14" (uuid "b5000001-0014-0000-0000-000000000001"))
    (pin "15" (uuid "b5000001-0015-0000-0000-000000000001"))
    (pin "16" (uuid "b5000001-0016-0000-0000-000000000001"))
  )

  ;; ===== AUDIO SECTION =====

  (text "=== AUDIO — I2S -> PAM8403 -> Speaker ===" (at 195.58 88.9 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "I2S: BCLK (GPIO19), LRCK (GPIO20), DOUT (GPIO21) | 32kHz stereo" (at 195.58 93.98 0)
    (effects (font (size 2.54 2.54)) (justify left)))

  ;; ===== PAM8403 Amplifier U5 =====
  (symbol
    (lib_id "PAM8403_Module")
    (at 231.14 116.84 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a6000001-0000-0000-0000-000000000001")
    (property "Reference" "U5" (at 231.14 106.68 0) (effects (font (size 1.27 1.27))))
    (property "Value" "PAM8403" (at 231.14 127 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b6000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b6000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b6000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b6000001-0004-0000-0000-000000000001"))
    (pin "5" (uuid "b6000001-0005-0000-0000-000000000001"))
  )

  ;; ===== Speaker LS1 =====
  (symbol
    (lib_id "Speaker")
    (at 266.7 116.84 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a6000002-0000-0000-0000-000000000001")
    (property "Reference" "LS1" (at 271.78 114.3 0) (effects (font (size 1.27 1.27))))
    (property "Value" "28mm_8ohm_0.5W" (at 266.7 124.46 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b6000002-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b6000002-0002-0000-0000-000000000001"))
  )

  ;; ===== STORAGE SECTION =====

  (text "=== STORAGE — SD Card SPI ===" (at 195.58 142.24 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "SPI: MOSI (GPIO15), MISO (GPIO16), CLK (GPIO17), CS (GPIO18)" (at 195.58 147.32 0)
    (effects (font (size 2.54 2.54)) (justify left)))

  ;; ===== SD Card Module U6 =====
  (symbol
    (lib_id "SD_Module")
    (at 231.14 167.64 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a7000001-0000-0000-0000-000000000001")
    (property "Reference" "U6" (at 231.14 157.48 0) (effects (font (size 1.27 1.27))))
    (property "Value" "SD_Card_SPI" (at 231.14 177.8 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b7000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b7000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b7000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b7000001-0004-0000-0000-000000000001"))
    (pin "5" (uuid "b7000001-0005-0000-0000-000000000001"))
    (pin "6" (uuid "b7000001-0006-0000-0000-000000000001"))
  )

  ;; ===== INPUT SECTION =====

  (text "=== INPUT — 12 Buttons + Joystick ===" (at 25.4 198.12 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "All buttons: active-low with 10k pull-up to 3.3V + 100nF debounce cap" (at 25.4 203.2 0)
    (effects (font (size 2.54 2.54)) (justify left)))

  ;; D-pad UP button (SW1) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 43.18 220.98 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000001-0000-0000-0000-000000000001")
    (property "Reference" "SW1" (at 43.18 218.44 0) (effects (font (size 1.27 1.27))))
    (property "Value" "UP" (at 43.18 223.52 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000001-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 35.56 213.36 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000001-R-00-0000-000000000001")
    (property "Reference" "R4" (at 33.02 213.36 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 38.1 213.36 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000001-R001-0000-000000000001"))
    (pin "2" (uuid "b8000001-R002-0000-000000000001"))
  )

  ;; D-pad DOWN button (SW2) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 43.18 233.68 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000002-0000-0000-0000-000000000001")
    (property "Reference" "SW2" (at 43.18 231.14 0) (effects (font (size 1.27 1.27))))
    (property "Value" "DOWN" (at 43.18 236.22 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000002-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000002-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 35.56 226.06 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000002-R-00-0000-000000000001")
    (property "Reference" "R5" (at 33.02 226.06 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 38.1 226.06 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000002-R001-0000-000000000001"))
    (pin "2" (uuid "b8000002-R002-0000-000000000001"))
  )

  ;; D-pad LEFT button (SW3) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 43.18 246.38 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000003-0000-0000-0000-000000000001")
    (property "Reference" "SW3" (at 43.18 243.84 0) (effects (font (size 1.27 1.27))))
    (property "Value" "LEFT" (at 43.18 248.92 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000003-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000003-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 35.56 238.76 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000003-R-00-0000-000000000001")
    (property "Reference" "R6" (at 33.02 238.76 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 38.1 238.76 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000003-R001-0000-000000000001"))
    (pin "2" (uuid "b8000003-R002-0000-000000000001"))
  )

  ;; D-pad RIGHT button (SW4) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 43.18 259.08 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000004-0000-0000-0000-000000000001")
    (property "Reference" "SW4" (at 43.18 256.54 0) (effects (font (size 1.27 1.27))))
    (property "Value" "RIGHT" (at 43.18 261.62 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000004-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000004-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 35.56 251.46 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000004-R-00-0000-000000000001")
    (property "Reference" "R7" (at 33.02 251.46 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 38.1 251.46 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000004-R001-0000-000000000001"))
    (pin "2" (uuid "b8000004-R002-0000-000000000001"))
  )

  ;; Button A (SW5) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 86.36 220.98 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000005-0000-0000-0000-000000000001")
    (property "Reference" "SW5" (at 86.36 218.44 0) (effects (font (size 1.27 1.27))))
    (property "Value" "A" (at 86.36 223.52 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000005-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000005-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 78.74 213.36 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000005-R-00-0000-000000000001")
    (property "Reference" "R8" (at 76.2 213.36 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 81.28 213.36 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000005-R001-0000-000000000001"))
    (pin "2" (uuid "b8000005-R002-0000-000000000001"))
  )

  ;; Button B (SW6) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 86.36 233.68 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000006-0000-0000-0000-000000000001")
    (property "Reference" "SW6" (at 86.36 231.14 0) (effects (font (size 1.27 1.27))))
    (property "Value" "B" (at 86.36 236.22 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000006-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000006-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 78.74 226.06 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000006-R-00-0000-000000000001")
    (property "Reference" "R9" (at 76.2 226.06 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 81.28 226.06 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000006-R001-0000-000000000001"))
    (pin "2" (uuid "b8000006-R002-0000-000000000001"))
  )

  ;; Button X (SW7) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 86.36 246.38 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000007-0000-0000-0000-000000000001")
    (property "Reference" "SW7" (at 86.36 243.84 0) (effects (font (size 1.27 1.27))))
    (property "Value" "X" (at 86.36 248.92 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000007-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000007-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 78.74 238.76 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000007-R-00-0000-000000000001")
    (property "Reference" "R10" (at 76.2 238.76 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 81.28 238.76 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000007-R001-0000-000000000001"))
    (pin "2" (uuid "b8000007-R002-0000-000000000001"))
  )

  ;; Button Y (SW8) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 86.36 259.08 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000008-0000-0000-0000-000000000001")
    (property "Reference" "SW8" (at 86.36 256.54 0) (effects (font (size 1.27 1.27))))
    (property "Value" "Y" (at 86.36 261.62 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000008-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000008-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 78.74 251.46 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000008-R-00-0000-000000000001")
    (property "Reference" "R11" (at 76.2 251.46 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 81.28 251.46 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000008-R001-0000-000000000001"))
    (pin "2" (uuid "b8000008-R002-0000-000000000001"))
  )

  ;; START button (SW9) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 129.54 220.98 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000009-0000-0000-0000-000000000001")
    (property "Reference" "SW9" (at 129.54 218.44 0) (effects (font (size 1.27 1.27))))
    (property "Value" "START" (at 129.54 223.52 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000009-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000009-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 121.92 213.36 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000009-R-00-0000-000000000001")
    (property "Reference" "R12" (at 119.38 213.36 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 124.46 213.36 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000009-R001-0000-000000000001"))
    (pin "2" (uuid "b8000009-R002-0000-000000000001"))
  )

  ;; SELECT button (SW10) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 129.54 233.68 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000010-0000-0000-0000-000000000001")
    (property "Reference" "SW10" (at 129.54 231.14 0) (effects (font (size 1.27 1.27))))
    (property "Value" "SELECT" (at 129.54 236.22 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000010-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000010-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 121.92 226.06 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000010-R-00-0000-000000000001")
    (property "Reference" "R13" (at 119.38 226.06 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 124.46 226.06 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000010-R001-0000-000000000001"))
    (pin "2" (uuid "b8000010-R002-0000-000000000001"))
  )

  ;; L shoulder button (SW11) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 129.54 246.38 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000011-0000-0000-0000-000000000001")
    (property "Reference" "SW11" (at 129.54 243.84 0) (effects (font (size 1.27 1.27))))
    (property "Value" "L" (at 129.54 248.92 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000011-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000011-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 121.92 238.76 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000011-R-00-0000-000000000001")
    (property "Reference" "R14" (at 119.38 238.76 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 124.46 238.76 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000011-R001-0000-000000000001"))
    (pin "2" (uuid "b8000011-R002-0000-000000000001"))
  )

  ;; R shoulder button (SW12) with pull-up
  (symbol
    (lib_id "SW_Push")
    (at 129.54 259.08 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000012-0000-0000-0000-000000000001")
    (property "Reference" "SW12" (at 129.54 256.54 0) (effects (font (size 1.27 1.27))))
    (property "Value" "R" (at 129.54 261.62 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000012-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b8000012-0002-0000-0000-000000000001"))
  )
  (symbol
    (lib_id "R")
    (at 121.92 251.46 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a8000012-R-00-0000-000000000001")
    (property "Reference" "R15" (at 119.38 251.46 0) (effects (font (size 1.016 1.016))))
    (property "Value" "10k" (at 124.46 251.46 0) (effects (font (size 1.016 1.016))))
    (pin "1" (uuid "b8000012-R001-0000-000000000001"))
    (pin "2" (uuid "b8000012-R002-0000-000000000001"))
  )

  ;; ===== PSP Joystick (Optional) J2 =====
  (symbol
    (lib_id "PSP_Joystick")
    (at 172.72 233.68 0)
    (unit 1)
    (exclude_from_sim no)
    (in_bom yes)
    (on_board yes)
    (dnp no)
    (uuid "a9000001-0000-0000-0000-000000000001")
    (property "Reference" "J2" (at 172.72 223.52 0) (effects (font (size 1.27 1.27))))
    (property "Value" "PSP_Joystick" (at 172.72 243.84 0) (effects (font (size 1.27 1.27))))
    (pin "1" (uuid "b9000001-0001-0000-0000-000000000001"))
    (pin "2" (uuid "b9000001-0002-0000-0000-000000000001"))
    (pin "3" (uuid "b9000001-0003-0000-0000-000000000001"))
    (pin "4" (uuid "b9000001-0004-0000-0000-000000000001"))
  )

  ;; ===== NET LABELS for GPIO assignments =====

  (text "=== GPIO PIN ASSIGNMENT TABLE ===" (at 195.58 195.58 0)
    (effects (font (size 3.81 3.81) bold) (justify left)))

  (text "DISPLAY (8080 Parallel):\nGPIO4=D0, GPIO5=D1, GPIO6=D2, GPIO7=D3\nGPIO8=D4, GPIO9=D5, GPIO10=D6, GPIO11=D7\nGPIO12=CS, GPIO13=RST, GPIO14=DC, GPIO15=WR*, GPIO46=RD\nGPIO3=BL (PWM backlight)\n\nSD CARD (SPI):\nGPIO36=MOSI, GPIO37=MISO, GPIO38=CLK, GPIO39=CS\n\nAUDIO (I2S):\nGPIO15=BCLK, GPIO16=LRCK, GPIO17=DOUT\n\nBUTTONS (GPIO input, active-low):\nGPIO40=UP, GPIO41=DOWN, GPIO42=LEFT, GPIO1=RIGHT\nGPIO2=A, GPIO48=B, GPIO47=X, GPIO21=Y\nGPIO45=START, GPIO0=SELECT (use boot button)\nGPIO35=L, GPIO18=R\n\nJOYSTICK (ADC analog):\nGPIO19=X_AXIS, GPIO20=Y_AXIS\n\n* GPIO26-32 reserved for Octal PSRAM" (at 195.58 200.66 0)
    (effects (font (size 1.778 1.778)) (justify left)))

  ;; ===== TITLE BLOCK =====
  (text "ESP32 Emu Turbo — SNES-First Handheld Console\nComplete Electrical Schematic\nRev 1.0 — Prototype Phase" (at 25.4 284.48 0)
    (effects (font (size 2.54 2.54) bold) (justify left)))

  (text "MCU: ESP32-S3-WROOM-1 N16R8 (16MB Flash, 8MB Octal PSRAM)\nDisplay: ST7796S 4.0\" 320x480 8-bit 8080 Parallel\nPower: USB-C -> IP5306 (charge+boost) -> AMS1117 (5V->3.3V)\nBattery: LiPo 3.7V 5000mAh (105080)\nAudio: I2S -> PAM8403 -> 28mm 8ohm Speaker\nStorage: MicroSD via SPI\nInput: 12 buttons + PSP joystick (optional)" (at 25.4 292.1 0)
    (effects (font (size 2.032 2.032)) (justify left)))

  ;; ===== WIRING NOTES =====

  (text "WIRING NOTES:\n1. All button GPIOs: 10k pull-up to 3.3V, 100nF cap to GND for debounce\n2. EN pin: 10k pull-up to 3.3V + 100nF cap to GND (RC reset circuit)\n3. AMS1117: 10uF input cap + 22uF output cap (tantalum recommended)\n4. Display backlight: direct 3.3V or PWM via MOSFET on GPIO3\n5. I2S audio routed through PAM8403 Class-D amplifier module\n6. SD card module has built-in level shifter (3.3V safe)\n7. IP5306 module handles USB-C PD negotiation internally" (at 25.4 309.88 0)
    (effects (font (size 1.778 1.778)) (justify left)))

  ;; ===== SHEET INSTANCES =====
  (sheet_instances
    (path "/"
      (page "1")
    )
  )
)
