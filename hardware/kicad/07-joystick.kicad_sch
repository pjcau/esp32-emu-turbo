(kicad_sch
  (version 20231120)
  (generator "eeschema")
  (generator_version "9.0")
  (uuid "00000010-cafe-4000-8000-000000000010")
  (paper "A4")
  (title_block
    (title "Joystick - PSP Analog (Optional)")
    (comment 1 "ESP32 Emu Turbo - Handheld Retro Console")
    (comment 2 "Generated by scripts/generate_schematics")
  )

  (lib_symbols
    (symbol "PSP_Joystick" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
      (property "Reference" "J" (at 0 7.62 0) (effects (font (size 1.27 1.27))))
      (property "Value" "PSP_Joystick" (at 0 -7.62 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "PSP_Joystick_0_1" (rectangle (start -5.08 6.35) (end 5.08 -6.35) (stroke (width 0.254) (type default)) (fill (type background))))
      (symbol "PSP_Joystick_1_1"
        (pin power_in line (at -7.62 3.81 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -7.62 0 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin output line (at 7.62 3.81 180) (length 2.54) (name "X_AXIS" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin output line (at 7.62 0 180) (length 2.54) (name "Y_AXIS" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))))
    (symbol "+3V3" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+3V3" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+3V3_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "+3V3_1_1" (pin power_in line (at 0 0 90) (length 0) (name "+3V3" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
    (symbol "+5V" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+5V" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+5V_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "+5V_1_1" (pin power_in line (at 0 0 90) (length 0) (name "+5V" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
    (symbol "GND" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -5.08 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "GND" (at 0 -3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "GND_0_1" (polyline (pts (xy 0 0) (xy 0 -1.27) (xy 1.27 -1.27) (xy 0 -2.54) (xy -1.27 -1.27) (xy 0 -1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "GND_1_1" (pin power_in line (at 0 0 270) (length 0) (name "GND" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
  )

  (text "JOYSTICK - PSP Analog Stick (Optional)" (at 30 25 0) (effects (font (size 5 5) bold) (justify left)))
  (text "2-axis analog input via ESP32-S3 ADC channels" (at 30 33 0) (effects (font (size 2.54 2.54)) (justify left)))
  (symbol (lib_id "PSP_Joystick") (at 120 110 0) (unit 1) (exclude_from_sim no) (in_bom yes) (on_board yes) (dnp no) (uuid "00000001-cafe-4000-8000-000000000001") (property "Reference" "J2" (at 120 105 0) (effects (font (size 1.27 1.27)))) (property "Value" "PSP_Joystick" (at 120 115 0) (effects (font (size 1.27 1.27)))) (pin "1" (uuid "00000002-cafe-4000-8000-000000000002")) (pin "2" (uuid "00000003-cafe-4000-8000-000000000003")) (pin "3" (uuid "00000004-cafe-4000-8000-000000000004")) (pin "4" (uuid "00000005-cafe-4000-8000-000000000005")))
  (global_label "+3V3" (shape input) (at 95 106.19 0) (effects (font (size 1.27 1.27))) (uuid "00000006-cafe-4000-8000-000000000006") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (wire (pts (xy 95 106.19) (xy 112.38 106.19)) (stroke (width 0) (type default)) (uuid "00000007-cafe-4000-8000-000000000007"))
  (symbol (lib_id "GND") (at 95 118 0) (unit 1) (exclude_from_sim no) (in_bom no) (on_board no) (dnp no) (uuid "00000008-cafe-4000-8000-000000000008") (property "Reference" "#PWR001" (at 95 116 0) (effects (font (size 1.27 1.27)) hide)) (property "Value" "GND" (at 95 120 0) (effects (font (size 1.27 1.27)) hide)) (pin "1" (uuid "00000009-cafe-4000-8000-000000000009")))
  (wire (pts (xy 112.38 110) (xy 95 110)) (stroke (width 0) (type default)) (uuid "0000000a-cafe-4000-8000-00000000000a"))
  (wire (pts (xy 95 110) (xy 95 118)) (stroke (width 0) (type default)) (uuid "0000000b-cafe-4000-8000-00000000000b"))
  (wire (pts (xy 127.62 106.19) (xy 150 106.19)) (stroke (width 0) (type default)) (uuid "0000000c-cafe-4000-8000-00000000000c"))
  (global_label "JOY_X" (shape bidirectional) (at 150 106.19 0) (effects (font (size 1.27 1.27))) (uuid "0000000d-cafe-4000-8000-00000000000d") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO20 (ADC2_CH9)" (at 165 106.19 0) (effects (font (size 2.54 2.54)) (justify left)))
  (wire (pts (xy 127.62 110) (xy 150 110)) (stroke (width 0) (type default)) (uuid "0000000e-cafe-4000-8000-00000000000e"))
  (global_label "JOY_Y" (shape bidirectional) (at 150 110 0) (effects (font (size 1.27 1.27))) (uuid "0000000f-cafe-4000-8000-00000000000f") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO44/RX0 (ADC2_CH7)" (at 165 110 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "Design Notes:" (at 30 160 0) (effects (font (size 2.54 2.54) bold) (justify left)))
  (text "- PSP-style mini analog stick with potentiometer outputs" (at 30 168 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- X/Y outputs: 0V (min) to 3.3V (max), ~1.65V at center" (at 30 174 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- ESP32-S3 ADC2: 12-bit resolution (4096 steps per axis)" (at 30 180 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- Optional: can be omitted for D-pad-only build" (at 30 186 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- GPIO44 shares RX0 UART pin; debug input unavailable when connected" (at 30 192 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- GPIO43 (TX0) still works for debug UART output" (at 30 198 0) (effects (font (size 2.54 2.54)) (justify left)))

  (sheet_instances (path "/" (page "7")))
)
