(kicad_sch
  (version 20231120)
  (generator "eeschema")
  (generator_version "9.0")
  (uuid "00000033-cafe-4000-8000-000000000033")
  (paper "A4")
  (title_block
    (title "Display - ST7796S 4.0in 8080 Parallel")
    (comment 1 "ESP32 Emu Turbo - Handheld Retro Console")
    (comment 2 "Generated by scripts/generate_schematics")
  )

  (lib_symbols
    (symbol "ST7796S_Module" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 17.78 0) (effects (font (size 1.27 1.27))))
      (property "Value" "ST7796S_4.0_8080" (at 0 -17.78 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "ST7796S_Module_0_1" (rectangle (start -7.62 16.51) (end 7.62 -16.51) (stroke (width 0.254) (type default)) (fill (type background))))
      (symbol "ST7796S_Module_1_1"
        (pin power_in line (at -10.16 15.24 0) (length 2.54) (name "VCC" (effects (font (size 1.016 1.016)))) (number "1" (effects (font (size 1.016 1.016)))))
        (pin power_in line (at -10.16 12.7 0) (length 2.54) (name "GND" (effects (font (size 1.016 1.016)))) (number "2" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 10.16 0) (length 2.54) (name "CS" (effects (font (size 1.016 1.016)))) (number "3" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 7.62 0) (length 2.54) (name "RST" (effects (font (size 1.016 1.016)))) (number "4" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 5.08 0) (length 2.54) (name "DC" (effects (font (size 1.016 1.016)))) (number "5" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 2.54 0) (length 2.54) (name "WR" (effects (font (size 1.016 1.016)))) (number "6" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 0 0) (length 2.54) (name "RD" (effects (font (size 1.016 1.016)))) (number "7" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 15.24 180) (length 2.54) (name "D0" (effects (font (size 1.016 1.016)))) (number "8" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 12.7 180) (length 2.54) (name "D1" (effects (font (size 1.016 1.016)))) (number "9" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 10.16 180) (length 2.54) (name "D2" (effects (font (size 1.016 1.016)))) (number "10" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 7.62 180) (length 2.54) (name "D3" (effects (font (size 1.016 1.016)))) (number "11" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 5.08 180) (length 2.54) (name "D4" (effects (font (size 1.016 1.016)))) (number "12" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 2.54 180) (length 2.54) (name "D5" (effects (font (size 1.016 1.016)))) (number "13" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 0 180) (length 2.54) (name "D6" (effects (font (size 1.016 1.016)))) (number "14" (effects (font (size 1.016 1.016)))))
        (pin bidirectional line (at 10.16 -2.54 180) (length 2.54) (name "D7" (effects (font (size 1.016 1.016)))) (number "15" (effects (font (size 1.016 1.016)))))
        (pin input line (at -10.16 -5.08 0) (length 2.54) (name "BL" (effects (font (size 1.016 1.016)))) (number "16" (effects (font (size 1.016 1.016)))))))
    (symbol "+3V3" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+3V3" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+3V3_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "+3V3_1_1" (pin power_in line (at 0 0 90) (length 0) (name "+3V3" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
    (symbol "+5V" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -3.81 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "+5V" (at 0 3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "+5V_0_1"
        (polyline (pts (xy -0.762 1.27) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0) (type default)) (fill (type none)))
        (polyline (pts (xy 0 2.54) (xy 0.762 1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "+5V_1_1" (pin power_in line (at 0 0 90) (length 0) (name "+5V" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
    (symbol "GND" (pin_names (offset 0) hide) (in_bom no) (on_board no)
      (property "Reference" "#PWR" (at 0 -5.08 0) (effects (font (size 1.27 1.27)) hide))
      (property "Value" "GND" (at 0 -3.81 0) (effects (font (size 1.27 1.27))))
      (property "Footprint" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (property "Datasheet" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide))
      (symbol "GND_0_1" (polyline (pts (xy 0 0) (xy 0 -1.27) (xy 1.27 -1.27) (xy 0 -2.54) (xy -1.27 -1.27) (xy 0 -1.27)) (stroke (width 0) (type default)) (fill (type none))))
      (symbol "GND_1_1" (pin power_in line (at 0 0 270) (length 0) (name "GND" (effects (font (size 1.27 1.27)))) (number "1" (effects (font (size 1.27 1.27)))))))
  )

  (text "DISPLAY - ST7796S 4.0in 320x480" (at 30 25 0) (effects (font (size 5 5) bold) (justify left)))
  (text "8-bit 8080 parallel interface (mandatory for SNES emulation speed)" (at 30 33 0) (effects (font (size 2.54 2.54)) (justify left)))
  (symbol (lib_id "ST7796S_Module") (at 148 120 0) (unit 1) (exclude_from_sim no) (in_bom yes) (on_board yes) (dnp no) (uuid "00000001-cafe-4000-8000-000000000001") (property "Reference" "U4" (at 148 115 0) (effects (font (size 1.27 1.27)))) (property "Value" "ST7796S 4.0in 8080" (at 148 125 0) (effects (font (size 1.27 1.27)))) (pin "1" (uuid "00000002-cafe-4000-8000-000000000002")) (pin "2" (uuid "00000003-cafe-4000-8000-000000000003")) (pin "3" (uuid "00000004-cafe-4000-8000-000000000004")) (pin "4" (uuid "00000005-cafe-4000-8000-000000000005")) (pin "5" (uuid "00000006-cafe-4000-8000-000000000006")) (pin "6" (uuid "00000007-cafe-4000-8000-000000000007")) (pin "7" (uuid "00000008-cafe-4000-8000-000000000008")) (pin "8" (uuid "00000009-cafe-4000-8000-000000000009")) (pin "9" (uuid "0000000a-cafe-4000-8000-00000000000a")) (pin "10" (uuid "0000000b-cafe-4000-8000-00000000000b")) (pin "11" (uuid "0000000c-cafe-4000-8000-00000000000c")) (pin "12" (uuid "0000000d-cafe-4000-8000-00000000000d")) (pin "13" (uuid "0000000e-cafe-4000-8000-00000000000e")) (pin "14" (uuid "0000000f-cafe-4000-8000-00000000000f")) (pin "15" (uuid "00000010-cafe-4000-8000-000000000010")) (pin "16" (uuid "00000011-cafe-4000-8000-000000000011")))
  (global_label "+3V3" (shape input) (at 118 104.76 0) (effects (font (size 1.27 1.27))) (uuid "00000012-cafe-4000-8000-000000000012") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (wire (pts (xy 118 104.76) (xy 137.84 104.76)) (stroke (width 0) (type default)) (uuid "00000013-cafe-4000-8000-000000000013"))
  (symbol (lib_id "GND") (at 118 107.3 0) (unit 1) (exclude_from_sim no) (in_bom no) (on_board no) (dnp no) (uuid "00000014-cafe-4000-8000-000000000014") (property "Reference" "#PWR001" (at 118 105.3 0) (effects (font (size 1.27 1.27)) hide)) (property "Value" "GND" (at 118 109.3 0) (effects (font (size 1.27 1.27)) hide)) (pin "1" (uuid "00000015-cafe-4000-8000-000000000015")))
  (wire (pts (xy 118 107.3) (xy 137.84 107.3)) (stroke (width 0) (type default)) (uuid "00000016-cafe-4000-8000-000000000016"))
  (text "Control signals:" (at 88 106 0) (effects (font (size 2 2) bold) (justify left)))
  (wire (pts (xy 137.84 109.84) (xy 112.84 109.84)) (stroke (width 0) (type default)) (uuid "00000017-cafe-4000-8000-000000000017"))
  (global_label "LCD_CS" (shape bidirectional) (at 112.84 109.84 180) (effects (font (size 1.27 1.27))) (uuid "00000018-cafe-4000-8000-000000000018") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO12" (at 87.84 109.84 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 137.84 112.38) (xy 112.84 112.38)) (stroke (width 0) (type default)) (uuid "00000019-cafe-4000-8000-000000000019"))
  (global_label "LCD_RST" (shape bidirectional) (at 112.84 112.38 180) (effects (font (size 1.27 1.27))) (uuid "0000001a-cafe-4000-8000-00000000001a") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO13" (at 87.84 112.38 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 137.84 114.92) (xy 112.84 114.92)) (stroke (width 0) (type default)) (uuid "0000001b-cafe-4000-8000-00000000001b"))
  (global_label "LCD_DC" (shape bidirectional) (at 112.84 114.92 180) (effects (font (size 1.27 1.27))) (uuid "0000001c-cafe-4000-8000-00000000001c") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO14" (at 87.84 114.92 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 137.84 117.46) (xy 112.84 117.46)) (stroke (width 0) (type default)) (uuid "0000001d-cafe-4000-8000-00000000001d"))
  (global_label "LCD_WR" (shape bidirectional) (at 112.84 117.46 180) (effects (font (size 1.27 1.27))) (uuid "0000001e-cafe-4000-8000-00000000001e") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO46" (at 87.84 117.46 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 137.84 120) (xy 112.84 120)) (stroke (width 0) (type default)) (uuid "0000001f-cafe-4000-8000-00000000001f"))
  (global_label "LCD_RD" (shape bidirectional) (at 112.84 120 180) (effects (font (size 1.27 1.27))) (uuid "00000020-cafe-4000-8000-000000000020") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO3" (at 87.84 120 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 137.84 125.08) (xy 112.84 125.08)) (stroke (width 0) (type default)) (uuid "00000021-cafe-4000-8000-000000000021"))
  (global_label "LCD_BL" (shape bidirectional) (at 112.84 125.08 180) (effects (font (size 1.27 1.27))) (uuid "00000022-cafe-4000-8000-000000000022") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO45" (at 87.84 125.08 0) (effects (font (size 1.5 1.5)) (justify left)))
  (text "8-bit data bus:" (at 173 100 0) (effects (font (size 2 2) bold) (justify left)))
  (wire (pts (xy 158.16 104.76) (xy 183.16 104.76)) (stroke (width 0) (type default)) (uuid "00000023-cafe-4000-8000-000000000023"))
  (global_label "LCD_D0" (shape bidirectional) (at 183.16 104.76 0) (effects (font (size 1.27 1.27))) (uuid "00000024-cafe-4000-8000-000000000024") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO4" (at 198.16 104.76 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 107.3) (xy 183.16 107.3)) (stroke (width 0) (type default)) (uuid "00000025-cafe-4000-8000-000000000025"))
  (global_label "LCD_D1" (shape bidirectional) (at 183.16 107.3 0) (effects (font (size 1.27 1.27))) (uuid "00000026-cafe-4000-8000-000000000026") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO5" (at 198.16 107.3 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 109.84) (xy 183.16 109.84)) (stroke (width 0) (type default)) (uuid "00000027-cafe-4000-8000-000000000027"))
  (global_label "LCD_D2" (shape bidirectional) (at 183.16 109.84 0) (effects (font (size 1.27 1.27))) (uuid "00000028-cafe-4000-8000-000000000028") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO6" (at 198.16 109.84 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 112.38) (xy 183.16 112.38)) (stroke (width 0) (type default)) (uuid "00000029-cafe-4000-8000-000000000029"))
  (global_label "LCD_D3" (shape bidirectional) (at 183.16 112.38 0) (effects (font (size 1.27 1.27))) (uuid "0000002a-cafe-4000-8000-00000000002a") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO7" (at 198.16 112.38 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 114.92) (xy 183.16 114.92)) (stroke (width 0) (type default)) (uuid "0000002b-cafe-4000-8000-00000000002b"))
  (global_label "LCD_D4" (shape bidirectional) (at 183.16 114.92 0) (effects (font (size 1.27 1.27))) (uuid "0000002c-cafe-4000-8000-00000000002c") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO8" (at 198.16 114.92 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 117.46) (xy 183.16 117.46)) (stroke (width 0) (type default)) (uuid "0000002d-cafe-4000-8000-00000000002d"))
  (global_label "LCD_D5" (shape bidirectional) (at 183.16 117.46 0) (effects (font (size 1.27 1.27))) (uuid "0000002e-cafe-4000-8000-00000000002e") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO9" (at 198.16 117.46 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 120) (xy 183.16 120)) (stroke (width 0) (type default)) (uuid "0000002f-cafe-4000-8000-00000000002f"))
  (global_label "LCD_D6" (shape bidirectional) (at 183.16 120 0) (effects (font (size 1.27 1.27))) (uuid "00000030-cafe-4000-8000-000000000030") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO10" (at 198.16 120 0) (effects (font (size 1.5 1.5)) (justify left)))
  (wire (pts (xy 158.16 122.54) (xy 183.16 122.54)) (stroke (width 0) (type default)) (uuid "00000031-cafe-4000-8000-000000000031"))
  (global_label "LCD_D7" (shape bidirectional) (at 183.16 122.54 0) (effects (font (size 1.27 1.27))) (uuid "00000032-cafe-4000-8000-000000000032") (property "Intersheetrefs" "" (at 0 0 0) (effects (font (size 1.27 1.27)) hide)))
  (text "GPIO11" (at 198.16 122.54 0) (effects (font (size 1.5 1.5)) (justify left)))
  (text "Design Notes:" (at 30 180 0) (effects (font (size 2.54 2.54) bold) (justify left)))
  (text "- 8080 parallel: 1 pixel (16-bit RGB565) = 2 bus cycles" (at 30 188 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- SPI alternative: 16 clock cycles per pixel (too slow for 60fps SNES)" (at 30 194 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- GPIO4-11 form contiguous 8-bit bus for efficient register-level DMA" (at 30 200 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- WR strobes data on rising edge, RD directly from GPIO3" (at 30 206 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- BL (backlight) via GPIO45 for brightness/power management" (at 30 212 0) (effects (font (size 2.54 2.54)) (justify left)))
  (text "- No level shifter: ESP32-S3 GPIO = 3.3V = display logic level" (at 30 218 0) (effects (font (size 2.54 2.54)) (justify left)))

  (sheet_instances (path "/" (page "3")))
)
